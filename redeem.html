<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>GambleHub Test</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDNF80md5t0mBPJdWngl5fIV4Rjp0FfqQA",
      authDomain: "gamblecore-59b61.firebaseapp.com",
      projectId: "gamblecore-59b61",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxSvIg79EQcYJqru3SjkGBIDofI3XghErzgD6xyzc3eW-oZk9PYy7IqD_YO1ay2I8hz/exec";


    async function signIn() {
      try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;
        document.getElementById("status").textContent = `Signed in as ${user.email}`;

        // Example: add 10 points
        await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify({
            email: user.email,
            name: user.displayName,
            points: 10,
            bought: ""
          }),
          headers: { "Content-Type": "application/json" }
        });
      } catch (err) {
        console.error(err);
      }
    }

    window.signIn = signIn;
  </script>
</head>
<body style="background:#111;color:#fff;font-family:sans-serif;text-align:center;padding:40px">
  <h1>GambleHub Test</h1>
  <button onclick="signIn()" style="padding:10px 20px;font-size:16px">Sign in with Google</button>
  <p id="status"></p>
</body>
</html>
