<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gamblecore Pachinko</title>
<style>
  body { margin:0; background:#071021; color:#fff; font-family:'Montserrat',sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
  h1 { color:#ffd66b; text-shadow:0 0 10px #ffd66b88; margin-bottom:15px; }
  button { padding:8px 14px; margin:5px; border-radius:8px; font-weight:700; background:#ff4d4d; color:#fff; border:none; cursor:pointer; }
  button:disabled { background:#555; cursor:not-allowed; }
  #total, #last { margin:10px 0; font-size:1.2rem; color:#cfcfcf; }
</style>
</head>
<body>

<h1>Pachinko</h1>
<button id="drop">DROP BALL</button>
<button id="reset">RESET</button>
<div id="total">Total Points: 0</div>
<div id="last">Last: —</div>

<script>
const POINT_CAPS=[500,1000,1500];
const REWARD_SMALL=5;
const REWARD_MEDIUM=15;
const REWARD_BIG=40;
let totalPoints=parseInt(localStorage.getItem('pachinkoTotal'))||0;
let currentCapIndex=parseInt(localStorage.getItem('pachinkoCapIndex'))||0;
let lastResult='';

function getCurrentCap(){ return POINT_CAPS[currentCapIndex]||POINT_CAPS[POINT_CAPS.length-1]; }
function saveState(){ localStorage.setItem('pachinkoTotal',totalPoints); localStorage.setItem('pachinkoCapIndex',currentCapIndex); }
function updateUI(){
  document.getElementById('total').innerText=`Total Points: ${totalPoints}`;
  document.getElementById('last').innerText=`Last: ${lastResult}`;
  document.querySelectorAll('button').forEach(b=>b.disabled=totalPoints>=getCurrentCap());
}

document.getElementById('drop').addEventListener('click',()=>{
  if(totalPoints>=getCurrentCap()) return;
  const slots=[0,1,2,3,4,5,6,7,8,9,10];
  const slot=slots[Math.floor(Math.random()*slots.length)];
  let pts=REWARD_SMALL;
  if(slot===5) pts=REWARD_BIG;
  else if(slot%2===0) pts=REWARD_MEDIUM;
  addPoints(pts,`${pts}pts (slot ${slot})`);
});

document.getElementById('reset').addEventListener('click',()=>{
  totalPoints=0; currentCapIndex=0; lastResult='—'; saveState(); updateUI();
});

function addPoints(pts,text){
  totalPoints=Math.min(getCurrentCap(),totalPoints+pts);
  lastResult=text;
  saveState();
  if(totalPoints>=getCurrentCap()){
    setTimeout(()=>{
      currentCapIndex=Math.min(currentCapIndex+1,POINT_CAPS.length-1);
      totalPoints=0;
      saveState();
      updateUI();
    },60*60*1000); // 1 hour
  }
  updateUI();
}

updateUI();
</script>

</body>
</html>
